<!DOCTYPE html>
<html lang="en">
<head>
	<title>Deferred</title>    		
</head>
<body>

	<form method="post">
		<input type="text" id="data" value="yes" />
		<input type="button" value="ok" id="ok">	
	</form>
	
	<script type="text/javascript" src="http://code.jquery.com/jquery-git.js"></script>
	<script type="text/javascript" >

	var userConfirmation = function(){
		var defeered = $.Deferred();
		var answer = confirm('press ok');
		defeered.notify();
		return defeered.resolve({'answer': answer});		
	};

	var userInput = function(){
		var defeered = $.Deferred();
		$('#ok').click(function(){
			defeered.notify();
			defeered.resolve({data:$('#data').val()});
		});
		return defeered.promise();
	};

	$.when(userConfirmation(),userInput())
		.done(function(confirmation, input){
			alert('user confirmation: ' + confirmation.answer + ' and user input: ' + input.data);	
		})
		.fail(function() {
			alert('fail');
		})
		.progress(function() {
			alert('progress);
		});
	

</script>



</body>
</html>
